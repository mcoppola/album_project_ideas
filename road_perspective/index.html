<!DOCTYPE html>
<html>
<head>
  <meta charset = "utf-8">
    <title>road 1</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <canvas id='canvas' width="600" height="600"></canvas>
    <script src="utils.js"></script>
    <script src="road.js"></script>
    <script>
      window.onload = function () {
        var canvas = document.getElementById('canvas'),
        
        context = canvas.getContext('2d'),
        delay = 100;
        road = new Road();
        frame = 0;
        snowFlakes = [];

        mouse = utils.captureMouse(canvas);
        canvas.addEventListener('mousedown', function() {
          snowFlakes.push(new SnowFlake(mouse.x, mouse.y, canvas.width, canvas.height))
        }, false);

        touch = utils.captureTouch(canvas);
        if (touch.isPressed) {
          snowFlakes.push(new SnowFlake(touch.x, touch.y, canvas.width, canvas.height))
        }
      

      (function drawFrame () {
        utils.getAnimationFrame();
        window.requestAnimationFrame(drawFrame, canvas);
        context.clearRect(0, 0, canvas.width, canvas.height);
        frame += 1;
        road.x += 1;
        road.y += 1;

        road.play(context, frame, canvas.width, canvas.height);
        for (var i = 0; i < snowFlakes.length; i++) {
                   
          snowFlakes[i].z -= 0.005;
          snowFlakes[i].draw(context, frame, canvas.width, canvas.height);

          if(snowFlakes[i].z < 0) {
            snowFlakes.splice(i, 1);
          }
          

        }
      


      }());
    };
    </script>
  </body>
  </html>